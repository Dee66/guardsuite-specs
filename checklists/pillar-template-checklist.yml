# GuardSuite Product Checklist Template
# This is the canonical checklist format consumed by guard-specs,
# the Architect, and all Implementors. It is product-agnostic.

metadata:
  checklist_version: 1.0.0
  product_id: <to be filled by guard-specs>
  generated_by: guard-specs
  last_updated: <auto>
  description: >
    Standardized implementation checklist for all GuardSuite products.
    Defines milestone phases, actionable items, acceptance criteria,
    dependencies, and audit requirements. Architect decomposes these
    items into ATUs during implementation.

states:
  allowed:
    - todo
    - in_progress
    - partial
    - done
    - blocked

structure:
  # Checklist is grouped by phases to give the Architect logical milestones.
  phases:
    - id: PH-001
      name: "Project Initialization"
      description: >
        Establish repository structure, validate bootstrap correctness,
        align the product with GuardTemplate, and confirm schema validity.
      required: true

    - id: PH-002
      name: "Core Scaffolding"
      description: >
        Create baseline modules, configure canonical evaluator shapes,
        establish product entrypoints, and ensure global principles match
        GuardSuite Master Spec requirements.
      required: true

    - id: PH-003
      name: "Feature Implementation"
      description: >
        Implement primary product features including scanners, guards,
        rules, pipelines, or engines depending on product type.
      required: true

    - id: PH-004
      name: "Validation & Determinism"
      description: >
        Guarantee deterministic output, stable sorting, schema compliance,
        and WASM-safe logic as required by GuardSuite global principles.
      required: true

    - id: PH-005
      name: "Integration & API Alignment"
      description: >
        Ensure alignment with GuardSpecs API, CI integration, audit flows,
        and cross-product interfaces.
      required: true

    - id: PH-006
      name: "Documentation & Release Readiness"
      description: >
        Produce product docs, sync with guard-specs, prepare changelogs,
        and finalize release artifacts.
      required: true

# checklist items: this is what Architect consumes and decomposes into ATUs.
items:
  - id: GS-001
    phase: PH-001
    title: "Validate bootstrap structure"
    status: todo
    description: >
      Validate that the product spec, checklist, and gpt-instructions have been
      loaded into Architect session correctly. Confirm repo aligns with GuardTemplate.
    acceptance_criteria:
      - Architect confirms all bootstrap components are present.
      - Implementor validates GuardTemplate folder structure.
      - Architect updates virtual checklist mirror accordingly.
    dependencies: []
    audit:
      required: true

  - id: GS-002
    phase: PH-001
    title: "Establish deterministic build context"
    status: todo
    description: >
      Ensure project includes pinned tools, reproducible configuration files,
      deterministic module loading strategy, and stable evaluation entrypoints.
    acceptance_criteria:
      - Implementor verifies deterministic config files.
      - Architect confirms parameters match GuardSuite Master Spec principles.
    dependencies: [GS-001]
    audit:
      required: true

  - id: GS-003
    phase: PH-002
    title: "Create core product scaffolding"
    status: todo
    description: >
      Generate baseline directory structure, placeholder modules, evaluator
      stubs, and configuration files used by the product.
    acceptance_criteria:
      - Repo contains all baseline directories.
      - Core files exist and match GuardTemplate patterns.
    dependencies: [GS-001]

  - id: GS-004
    phase: PH-002
    title: "Add canonical schema references"
    status: todo
    description: >
      Reference global schemas for evaluator fields, issue formats, rule
      definitions, and stable canonical sorting behaviors.
    acceptance_criteria:
      - Schema references validated by Implementor.
      - Architect confirms alignment with Master Spec invariants.
    dependencies: [GS-003]
    audit:
      required: true

  - id: GS-005
    phase: PH-003
    title: "Implement feature modules"
    status: todo
    description: >
      Implement the primary modules for this product. For scanners, add rule
      engines; for guards, add policy logic; for engines, add orchestration or
      scoring logic. Architect must decompose this item into ATUs.
    acceptance_criteria:
      - Modules compile with no errors.
      - Implementor confirms tests execute successfully.
      - Architect approves behavior against product spec.
    dependencies: [GS-003, GS-004]

  - id: GS-006
    phase: PH-004
    title: "Ensure deterministic and reproducible outputs"
    status: todo
    description: >
      Validate deterministic outputs via sorted results, stable evaluator shapes,
      WASM-safe operations, and canonical issue generation rules.
    acceptance_criteria:
      - Determinism tests pass.
      - Sorting verified.
      - WASM-safe patterns confirmed.
    dependencies: [GS-005]
    audit:
      required: true

  - id: GS-007
    phase: PH-005
    title: "Integrate with GuardSpecs API"
    status: todo
    description: >
      Enable product to pull updates / metadata from guard-specs and optionally
      push state, audit results, or version data.
    acceptance_criteria:
      - Implementor demonstrates successful API calls.
      - Architect validates endpoints and payload structures.
    dependencies: [GS-006]

  - id: GS-008
    phase: PH-006
    title: "Documentation, examples, and release readiness"
    status: todo
    description: >
      Generate product documentation, examples, usage guides, integration docs,
      and ensure everything matches auto-generated metadata from guard-specs.
    acceptance_criteria:
      - Docs generated and free of errors.
      - Architect signs off lifecycle readiness.
    dependencies: [GS-001, GS-007]

settings:
  sequencing:
    default_order: by_phase_then_id
    architect_can_reorder: true
  atu_behavior:
    description: "An Architect may break a checklist item into multiple ATUs."
    requirements:
      - Track partial progress.
      - Maintain dependencies.
      - Mark item 'done' only when all ATUs complete.

validation:
  require_all_phases: true
  require_unique_ids: true
  require_dependencies_exist: true
  require_acceptance_criteria: true
  require_status_valid: true
  schema_version: 1

examples:
  small_item:
    id: GS-009
    phase: PH-003
    title: "Add placeholder evaluator"
    status: todo
    description: "Temporary evaluator to test module loading."
    acceptance_criteria:
      - "File loads without errors"
      - "Recognizable by build system"
    dependencies: [GS-003]

notes:
  - "This template is intended to be copied into each product folder under guard-specs."
  - "Architect consumes it directly during bootstrap."
  - "Implementor interacts with checklist state indirectly through ATUs."
