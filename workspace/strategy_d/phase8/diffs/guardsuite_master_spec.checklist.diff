--- products/guardsuite_master_spec/checklist/checklist.yml.orig+++ products/guardsuite_master_spec/checklist/checklist.yml@@ -1,77 +1,343 @@-# products/guardsuite_master_spec/checklist/checklist.yml
-# Strategy-D canonical checklist for the GuardSuite master spec and checklist registry service
-
 metadata:
   product_id: guardsuite_master_spec
-  checklist_version: "2026.04"
-  last_updated: "2025-11-25T00:00:00Z"
-  owner: "GuardSuite Platform Team"
+  checklist_version: '2026.04'
+  last_updated: '2025-11-25T00:00:00Z'
+  owner: GuardSuite Platform Team
   stability: ga
-
-structure_requirements:
-  - id: STRUCT-GMSTR-001
-    description: "Preserve every source section, bullet, and descriptive line from the historical master spec file."
-    required: true
-  - id: STRUCT-GMSTR-002
-    description: "Apply Strategy-D ordering: metadata ⇒ canonical requirement sections ⇒ phases ⇒ legacy snapshot."
-    required: true
-  - id: STRUCT-GMSTR-003
-    description: "Document governance, schema, and API expectations before enumerating operational phases."
-    required: true
-
-documentation_requirements:
-  readme_required: true
-  product_docs_required: true
-  api_reference_required: true
-  examples_required: true
-  changelog_required: true
-  release_notes_required: true
-
-schema_requirements:
-  canonical_schema_required: true
-  metadata_schema_required: true
-  provenance_schema_required: true
-  fragment_schemas_required: true
-  additional_schemas:
-    - schemas/product_schema.yml
-    - schemas/checklist_schema.yml
-    - schemas/gpt_instructions_schema.yml
-    - schemas/bootstrap_schema.yml
-    - schemas/cli_output.json
-    - schemas/cli_error.json
-    - schemas/fixpack_schema.yml
-
-evaluator_requirements:
-  pipeline_must_match_template: true
-  canonicalization_required: true
-  wasm_safety_required: true
-  deterministic_output_required: true
-  timestamp_normalization_required: true
-  prohibited_overrides:
-    - canonical.output_contract
-    - engine.payload_serializer
-    - evaluator.stage_order
-    - bootstrap.generator_contract
-
-fixpack_requirements:
-  fixpack_catalog_required: false
-  fixpack_metadata_required: false
-  difficulty_taxonomy_required: false
-  patch_hashing_required: false
-  remediation_examples_required: false
-
-testing_requirements:
-  unit_tests_required: true
-  integration_tests_required: true
-  snapshot_tests_required: true
-  parity_tests_required: true
-  wasm_tests_required: false
-  schema_validation_tests_required: true
-  performance_tests_required: true
-  minimum_coverage_percent: 85
-
-artifacts:
-  required_files:
+states: {}
+phases:
+- phase: mission_and_scope
+  summary: Codify mission, purpose, principles, and scope boundaries for guard-specs.
+  items:
+  - id: MSPEC-001
+    title: Mission statements
+    tasks:
+    - "mission:\n  - \"Be the canonical source-of-truth for product specs, checklists,\
+      \ and gpt-instructions across GuardSuite.\"\n  - \"Produce deterministic, validated,\
+      \ versioned bootstrap artifacts consumable by Architect sessions and tooling.\"\
+      \n  - \"Enforce schema-first governance, versioning discipline, and lifecycle\
+      \ management across the suite.\"\n"
+  - id: MSPEC-002
+    title: Purpose summary
+    tasks:
+    - "purpose:\n  summary: >\n    guard-specs stores product YAML specs and checklists,\
+      \ validates them against the schema registry,\n    generates deterministic bootstrap\
+      \ artifacts (spec + checklist + gpt-instructions + session skeleton),\n    exposes\
+      \ programmatic APIs and CLI for CI/Architect consumption, and manages governance\
+      \ and migrations.\n"
+  - id: MSPEC-003
+    title: Principles
+    tasks:
+    - "principles:\n  - \"Schema-first: all public shapes live under /schemas and\
+      \ are versioned.\"\n  - \"Determinism: identical inputs must produce identical\
+      \ bootstrap artifacts.\"\n  - \"Governance: breaking changes require migration\
+      \ guides and downstream pinning.\"\n  - \"No secrets: specs must not contain\
+      \ secrets; secrets are external references.\"\n  - \"Auditability: every change\
+      \ must be recorded with actor, timestamp, and diff.\"\n"
+  - id: MSPEC-004
+    title: Scope
+    tasks:
+    - "scope:\n  responsibilities:\n    - authoritative storage of product specs,\
+      \ checklists, and gpt-instructions\n    - schema registry and schema validation\
+      \ service\n    - deterministic bootstrap artifact generation and versioning\n\
+      \    - API and CLI for product lifecycle operations (create, update, validate,\
+      \ generate)\n    - scheduler for periodic/regenerative bootstrap generation\n\
+      \    - webhook ingestion for Implementor #FEEDBACK_CONTRACT and CI audit results\n\
+      \    - governance workflows (deprecation, migration, version pinning)\n    -\
+      \ artifact storage, metadata DB, and backup\n  out_of_scope:\n    - runtime\
+      \ execution of pillar code (concrete pillars run their own code)\n    - platform\
+      \ network gateway and auth proxy (handled by platform/gateway)\n    - secret\
+      \ manager storage for sensitive values (use external secret manager)\n"
+- phase: governance_and_versioning
+  summary: Capture responsibility matrix, versioning policy, and governance commitments.
+  items:
+  - id: MSPEC-005
+    title: Responsibility matrix
+    tasks:
+    - "responsibility_matrix:\n  canonical_serializer: guardsuite-core (future)\n\
+      \  evaluator_pipeline: guard-template (implementation) / concrete pillars (consumers)\n\
+      \  issue_model: guardsuite-core (future) / dev-shim (template)\n  rule_bundles:\
+      \ concrete pillars\n  fixpacks: concrete pillars (catalog indexed by guard-specs)\n\
+      \  schemas: guard-specs (registry) + guard-template-owned shared schemas\n \
+      \ determinism_contract: guard-specs (policy enforcement) + guard-template (implementation)\n\
+      \  bootstrap_artifacts: guard-specs (generation) / object_store (storage)\n"
+  - id: MSPEC-006
+    title: Versioning policy
+    tasks:
+    - "versioning_policy:\n  - follow_semver: true\n  - breaking_changes_require:\
+      \ major\n  - schema_changes_require: minor_or_major (explicit per-schema rule)\n\
+      \  - downstream_pillars_must_pin_template_version: true\n  - migration_guides_required_for_major_versions\n\
+      \  - require_changelog_fragment_on_update: true\n"
+- phase: data_model_and_schemas
+  summary: Define canonical records and schema registry expectations.
+  items:
+  - id: MSPEC-007
+    title: Data model
+    tasks:
+    - "data_model:\n  product_record:\n    id: string  # unique, lowercase-dashed\n\
+      \    name: string\n    description: string\n    maintainers: list[string]\n\
+      \    status: enum(draft, active, deprecated)\n    spec_yaml: text\n    checklist_yaml:\
+      \ text\n    gpt_instructions_yaml: text\n    schemas: list[string]\n    tags:\
+      \ list[string]\n    bootstrap_versions:\n      - version_hash: string\n    \
+      \    timestamp: timestamp\n        artifact_path: string\n    latest_bootstrap:\
+      \ string\n    validation_report: object\n    created_at: timestamp\n    updated_at:\
+      \ timestamp\n  bootstrap_artifact:\n    product_id: string\n    version_hash:\
+      \ string\n    timestamp: timestamp\n    artifact: object\n    validation_errors:\
+      \ list[string]\n    incomplete: boolean\n  feedback_contract:\n    product_id:\
+      \ string\n    task_id: string\n    status: enum(done, blocked, issue, already_done)\n\
+      \    summary: string\n    details: object\n    timestamp: timestamp\n"
+  - id: MSPEC-008
+    title: Schema registry
+    tasks:
+    - "schemas:\n  location: /schemas\n  required:\n    - product_schema.yml\n   \
+      \ - checklist_schema.yml\n    - gpt_instructions_schema.yml\n    - bootstrap_schema.yml\n\
+      \    - cli_output.json\n    - cli_error.json\n    - fixpack_schema.yml\n  versioning:\n\
+      \    - per-schema semver\n    - changes must include compatibility guidance\n\
+      \    - schema PRs require automated backward-compatibility checks\n"
+- phase: api_and_cli_surface
+  summary: Expose HTTP API, roles, and CLI interface requirements.
+  items:
+  - id: MSPEC-009
+    title: API endpoints
+    tasks:
+    - "api:\n  base_path: /api/v1\n  auth: bearer_token\n  roles:\n    - reader\n\
+      \    - writer\n    - ci\n    - admin\n  openapi: openapi.yaml\n  endpoints:\n\
+      \    - GET  /products\n      desc: list products (paginated)\n      auth: reader\n\
+      \    - POST /products\n      desc: create product (require spec + checklist\
+      \ + gpt-instructions)\n      auth: writer\n      body: { id, spec_yaml, checklist_yaml,\
+      \ gpt_instructions_yaml, maintainers }\n    - GET  /products/{id}\n      desc:\
+      \ fetch full product record\n      auth: reader\n    - PATCH /products/{id}\n\
+      \      desc: partial update (replace YAMLs or metadata)\n      auth: writer\n\
+      \    - DELETE /products/{id}\n      desc: deprecate product (status change)\
+      \ — admin confirmation\n      auth: admin\n    - POST /products/{id}/validate\n\
+      \      desc: run schema + master-spec validations\n      auth: ci\n    - POST\
+      \ /products/{id}/bootstrap/generate\n      desc: trigger synchronous bootstrap\
+      \ regen; returns metadata\n      auth: ci\n    - GET  /products/{id}/bootstrap\n\
+      \      desc: return latest bootstrap artifact JSON\n      auth: reader\n   \
+      \ - POST /products/{id}/audit\n      desc: enqueue audit (used by /ai-dev-report\
+      \ flows)\n      auth: writer\n    - POST /webhooks/scan-result\n      desc:\
+      \ receive Implementor #FEEDBACK_CONTRACT and persist/update product state\n\
+      \      security: webhook_secret\n"
+  - id: MSPEC-010
+    title: CLI commands
+    tasks:
+    - "cli:\n  tool: guard-specs-cli\n  commands:\n    - product:create --id <id>\
+      \ --spec <file> --checklist <file> --instructions <file>\n    - product:update\
+      \ --id <id> --patch <file>\n    - bootstrap:generate --id <id> [--print]\n \
+      \   - validate --id <id>\n    - product:list\n  default_output: JSON\n  ux_requirements:\n\
+      \    - outputs must be copy-paste friendly for Architect sessions\n    - error\
+      \ codes should conform to /schemas/cli_error.json\n"
+- phase: bootstrap_generation_pipeline
+  summary: Define artifact shape, algorithm, and determinism guarantees.
+  items:
+  - id: MSPEC-011
+    title: Bootstrap generation
+    tasks:
+    - "bootstrap_generation:\n  purpose: produce deterministic JSON bootstrap artifact\
+      \ for Architect consumption\n  artifact_shape:\n    - metadata: { product_id,\
+      \ timestamp, version_hash, generator_version }\n    - spec: raw spec_yaml\n\
+      \    - checklist: raw checklist_yaml\n    - gpt_instructions: raw gpt_instructions_yaml\n\
+      \    - session_skeleton: { last_checklist_item: null, last_instruction_version:\
+      \ 0 }\n    - validation_report: []\n  algorithm:\n    - load YAMLs\n    - validate\
+      \ against schemas\n    - compose canonical JSON (canonical key ordering, list\
+      \ sorting rules)\n    - normalize environment-dependent fields (paths, runtime\
+      \ metadata)\n    - compute version_hash: sha256(canonical_json)[0:12]\n    -\
+      \ persist artifact to object_store and metadata DB\n    - optionally commit\
+      \ artifact to repo path /bootstraps/<product>.json (configurable)\n  determinism_requirements:\n\
+      \    - canonical serialization consistent across platforms\n    - normalization:\
+      \ strip_absolute_paths, normalize_path_separators, remove_platform_specific_metadata\n\
+      \    - snapshot test: generate 3x and assert identical version_hash\n"
+- phase: validation_and_scheduler
+  summary: Describe validation engine outputs and scheduler policies.
+  items:
+  - id: MSPEC-012
+    title: Validation engine
+    tasks:
+    - "validation_engine:\n  features:\n    - schema validation (YAML -> JSON schema)\n\
+      \    - cross-check spec vs checklist consistency\n    - no-secrets detection\
+      \ (disallow common secret patterns)\n    - checklist completeness: unique IDs,\
+      \ acceptance_criteria presence\n    - naming conformance (id format rules)\n\
+      \    - fixpack references verification (if fixpack present)\n    - master_spec\
+      \ invariants enforcement (e.g., determinism flags)\n  output:\n    - structured\
+      \ validation_report with severity, file/line references, remediation hints\n\
+      \  integration_points:\n    - API endpoints, CLI, scheduler, bootstrap generator,\
+      \ webhooks\n"
+  - id: MSPEC-013
+    title: Scheduler
+    tasks:
+    - "scheduler:\n  responsibilities:\n    - periodic artifact regeneration (default\
+      \ PT15M)\n    - incremental generation on git push / webhook triggers\n    -\
+      \ manage job queue with retries and exponential backoff\n  policies:\n    -\
+      \ do not replace artifact on validation failure\n    - on failure: store artifact\
+      \ as incomplete and notify maintainers\n    - admin override allowed for forced\
+      \ regeneration\n"
+- phase: storage_and_webhooks
+  summary: Capture storage tiers and webhook ingestion controls.
+  items:
+  - id: MSPEC-014
+    title: Storage layers
+    tasks:
+    - "storage:\n  metadata_db:\n    - Postgres (products, bootstrap_versions, validation_reports,\
+      \ changelog)\n  artifact_store:\n    - S3-compatible object store for bootstrap\
+      \ JSON artifacts\n  backups:\n    - daily DB snapshot retention 30 days\n  \
+      \  - artifact lifecycle policy: retain 12 months (configurable)\n"
+  - id: MSPEC-015
+    title: Webhooks
+    tasks:
+    - "webhooks:\n  endpoints:\n    - POST /webhooks/scan-result\n      desc: ingest\
+      \ Implementor #FEEDBACK_CONTRACT\n      security: HMAC signature using webhook_secret\n\
+      \      on_receive:\n        - validate signature\n        - persist feedback_contract\n\
+      \        - update product validation state or session_state\n        - optionally\
+      \ trigger automated tasks (e.g., schedule re-validation)\n  secret_mana\n  secret_management:\n\
+      \    - rotate webhook_secret monthly\n    - notify maintainers on rotation\n"
+- phase: governance_security_observability
+  summary: Enforce change management, security, and telemetry controls.
+  items:
+  - id: MSPEC-016
+    title: Governance
+    tasks:
+    - "governance:\n  change_management:\n    - all product updates must include changelog\
+      \ fragment\n    - breaking schema changes require RFC + two platform approvers\n\
+      \    - deprecation warnings published at least 3 release cycles prior\n  migration_guides:\n\
+      \    - required for any major schema or artifact contract change\n    - published\
+      \ under /docs/migrations/<schema>-vX-to-vY.md\n  audit_logging:\n    - record\
+      \ actor, commit_hash, diff, timestamp for writes\n"
+  - id: MSPEC-017
+    title: Security
+    tasks:
+    - "security:\n  auth:\n    - bearer token for API with RBAC\n    - roles: reader,\
+      \ writer, ci, admin\n  input_safety:\n    - specs cannot contain literal secrets\
+      \ (validation rule)\n    - redact PII in logs and validation reports\n  webhook_security:\n\
+      \    - HMAC verification\n  supply_chain:\n    - dependency vulnerability scanning\
+      \ for guard-specs repo\n"
+  - id: MSPEC-018
+    title: Observability
+    tasks:
+    - "observability:\n  metrics:\n    - product_count\n    - validation_failures_total\n\
+      \    - bootstrap_generation_duration_seconds\n    - scheduler_job_success_ratio\n\
+      \    - api_error_rate\n  logging:\n    - structured JSON logs with request_id,\
+      \ actor, product_id\n  tracing:\n    - trace bootstrap generation paths\n  alerts:\n\
+      \    - validation_failure_spike → paging\n    - scheduler_job_failure_rate >\
+      \ threshold → paging\n"
+- phase: testing_and_ci_cd
+  summary: Maintain comprehensive testing strategy and CI gates.
+  items:
+  - id: MSPEC-019
+    title: Testing
+    tasks:
+    - "testing:\n  unit_tests:\n    - schema validators\n    - canonical serializer\n\
+      \    - bootstrap composer\n    - auth/role enforcement\n  integration_tests:\n\
+      \    - create product → validate → generate → fetch artifact (end-to-end)\n\
+      \    - webhook flow ingestion\n  determinism_tests:\n    - run bootstrap generation\
+      \ 3x with identical inputs → assert identical hashes\n  e2e_tests:\n    - simulate\
+      \ Architect session: CLI copy → Architect consumes artifact → Implementor feedback\
+      \ cycle\n  test_data:\n    - include sample product specs: simple, intermediate,\
+      \ complex\n    - include malformed specs for negative tests\n"
+  - id: MSPEC-020
+    title: CI/CD
+    tasks:
+    - "ci_cd:\n  pipelines:\n    - pre-commit: linters, schema validate (fast)\n \
+      \   - pre-merge: unit + integration + determinism tests\n    - release: tag,\
+      \ publish openapi.yaml, run smoke tests (staging)\n  releases:\n    - semantic\
+      \ versioning\n    - changelog fragment required\n    - publish release notes\
+      \ and migration guidance for major bumps\n"
+- phase: documentation_and_integrations
+  summary: Document OpenAPI, developer experience, integration, and deliverables.
+  items:
+  - id: MSPEC-021
+    title: OpenAPI
+    tasks:
+    - "openapi:\n  file: openapi.yaml\n  must_document:\n    - endpoints and request/response\
+      \ schemas\n    - auth flows and scopes\n    - example requests for CLI consumption\n"
+  - id: MSPEC-022
+    title: Developer experience
+    tasks:
+    - "developer_experience:\n  docs:\n    - getting_started.md (authoring product\
+      \ spec & checklist)\n    - schema_guides.md (writing valid schemas)\n    - bootstrap_consumer.md\
+      \ (how to consume artifact in Architect)\n    - api_reference.md (human readable)\n\
+      \    - migration_guide_template.md\n  cli expectations:\n    - guard-specs-cli\
+      \ should produce JSON suitable for Architect paste\n    - include helpful error\
+      \ messages and remediation hints\n"
+  - id: MSPEC-023
+    title: Integration points
+    tasks:
+    - "integration_points:\n  - guard-template: read shared schemas, guidance and\
+      \ bootstrapping patterns\n  - guard-repos (concrete pillars): push audits/webhooks\
+      \ and retrieve artifacts\n  - CI systems: call /products/{id}/validate pre-merge\n\
+      \  - Architect (browser): GET /products/{id}/bootstrap and paste into session\n"
+  - id: MSPEC-024
+    title: Deliverables
+    tasks:
+    - "deliverables:\n  initial:\n    - repos/guard-specs/spec.yml\n    - repos/guard-specs/checklist.yml\n\
+      \    - /schemas/product_schema.yml\n    - /schemas/checklist_schema.yml\n  \
+      \  - /schemas/gpt_instructions_schema.yml\n    - /schemas/bootstrap_schema.yml\n\
+      \    - /schemas/cli_output.json\n    - /schemas/cli_error.json\n    - openapi.yaml\n\
+      \    - guard-specs-cli skeleton\n    - scheduler job definitions\n    - CI workflow\
+      \ manifests\n    - docs for authoring, migration, and bootstrap consumption\n\
+      \  ongoing:\n    - migration guides on major changes\n    - sample specs for\
+      \ canonical pillar types\n"
+- phase: acceptance_and_runbook
+  summary: Capture initialization, acceptance, runbooks, and appendix flows.
+  items:
+  - id: MSPEC-025
+    title: Initialization requirements
+    tasks:
+    - "initialization_requirements:\n  - \"poetry install must succeed without flags\"\
+      \n  - \"pytest -q must pass in CI using included test data\"\n  - \"guard-specs-cli\
+      \ --help must succeed\"\n  - \"schema-validation script must validate /schemas\
+      \ directory\"\n  - \"catalog/index.yml (if present) must be valid\"\n"
+  - id: MSPEC-026
+    title: Acceptance criteria
+    tasks:
+    - "acceptance_criteria:\n  - end_to_end: create product → validate → generate\
+      \ bootstrap → Architect consumes artifact\n  - determinism: repeated generation\
+      \ of identical inputs yields identical version_hash (3x)\n  - governance: schema\
+      \ change flow and migration guide exist for major bumps\n  - security: RBAC\
+      \ enforced for writes; webhooks validated\n  - docs: authoring guide and API\
+      \ reference present and verified\n"
+  - id: MSPEC-027
+    title: Operational runbook
+    tasks:
+    - "operational_runbook:\n  maintenance_tasks:\n    - rotate_webhook_secret: monthly\n\
+      \    - run_schema_compat_check: on schema PR\n    - full_bootstrap_regeneration:\
+      \ weekly (configurable)\n    - backup_metadata_db: daily\n  incident_response:\n\
+      \    - scheduler_failure: page oncall, requeue failed jobs\n    - deterministic_test_failure:\
+      \ mark artifact incomplete, notify maintainers\n    - validation_failure_spike:\
+      \ open incident and triage\n"
+  - id: MSPEC-028
+    title: Appendix
+    tasks:
+    - "appendix:\n  sample_product_flow:\n    - \"1. user POST /products with spec+checklist+instructions\"\
+      \n    - \"2. guard-specs validates and stores product\"\n    - \"3. guard-specs\
+      \ generates bootstrap artifact and persists metadata\"\n    - \"4. Architect\
+      \ fetches artifact and begins session\"\n    - \"5. Implementor runs tasks and\
+      \ may POST #FEEDBACK_CONTRACT to /webhooks/scan-result\"\n  uploaded_draft_trace:\
+      \ \"/mnt/data/guardsuite-specs.yml\"\n"
+items: []
+x_legacy:
+  acceptance_criteria:
+  - id: ACPT-GMSTR-001
+    description: 'End-to-end flow: create product → validate → generate bootstrap
+      → Architect consumes artifact.'
+    required: true
+  - id: ACPT-GMSTR-002
+    description: 'Determinism: repeated bootstrap generation with identical inputs
+      yields identical hashes (3x).'
+    required: true
+  - id: ACPT-GMSTR-003
+    description: 'Governance: schema change flow, migration guide, and downstream
+      notifications exist for every major bump.'
+    required: true
+  - id: ACPT-GMSTR-004
+    description: 'Security: RBAC enforced for writes, webhook signatures validated,
+      and no literal secrets stored.'
+    required: true
+  - id: ACPT-GMSTR-005
+    description: 'Docs: authoring guide, API reference, and migration templates published
+      and validated.'
+    required: true
+  artifacts:
+    required_files:
     - repos/guard-specs/spec.yml
     - products/guardsuite_master_spec/checklist/checklist.yml
     - schemas/product_schema.yml
@@ -82,7 +348,7 @@     - schemas/cli_error.json
     - openapi.yaml
     - docs/migrations/
-  required_directories:
+    required_directories:
     - repos/guard-specs
     - schemas
     - docs
@@ -90,962 +356,266 @@     - ci
     - scripts
     - tests
-  build_outputs:
+    build_outputs:
     - bootstraps/*.json
     - artifacts/validation_reports
-
-acceptance_criteria:
-  - id: ACPT-GMSTR-001
-    description: "End-to-end flow: create product → validate → generate bootstrap → Architect consumes artifact."
-    required: true
-  - id: ACPT-GMSTR-002
-    description: "Determinism: repeated bootstrap generation with identical inputs yields identical hashes (3x)."
-    required: true
-  - id: ACPT-GMSTR-003
-    description: "Governance: schema change flow, migration guide, and downstream notifications exist for every major bump."
-    required: true
-  - id: ACPT-GMSTR-004
-    description: "Security: RBAC enforced for writes, webhook signatures validated, and no literal secrets stored."
-    required: true
-  - id: ACPT-GMSTR-005
-    description: "Docs: authoring guide, API reference, and migration templates published and validated."
-    required: true
-
-cross_product_dependencies:
-  depends_on_products:
+  cross_product_dependencies:
+    depends_on_products:
     - guardsuite-core
     - guard-template
     - guardboard
-  depends_on_schemas:
+    depends_on_schemas:
     - schemas/product_schema.yml
     - schemas/checklist_schema.yml
     - schemas/bootstrap_schema.yml
-  depends_on_pipeline: true
-
-provenance:
-  - "Derived from the GuardSuite Specs charter dated 2025-11-24."
-  - "Aligned with guardsuite-template evaluator and governance invariants."
-  - "Backed by the deterministic bootstrap artifact contract."
-
-id: guardsuite_master_spec_checklist
-version: "2026.04"
-product: guardsuite_master_spec
-pillar: platform
-spec_source: "products/guardsuite_master_spec/spec.yml"
-
-phases:
-
-  # ============================================================
-  # PHASE 1 — MISSION, PURPOSE, AND SCOPE
-  # ============================================================
-  - phase: mission_and_scope
-    summary: "Codify mission, purpose, principles, and scope boundaries for guard-specs."
-    items:
-      - id: MSPEC-001
-        title: "Mission statements"
-        tasks:
-          - |
-            mission:
-              - "Be the canonical source-of-truth for product specs, checklists, and gpt-instructions across GuardSuite."
-              - "Produce deterministic, validated, versioned bootstrap artifacts consumable by Architect sessions and tooling."
-              - "Enforce schema-first governance, versioning discipline, and lifecycle management across the suite."
-      - id: MSPEC-002
-        title: "Purpose summary"
-        tasks:
-          - |
-            purpose:
-              summary: >
-                guard-specs stores product YAML specs and checklists, validates them against the schema registry,
-                generates deterministic bootstrap artifacts (spec + checklist + gpt-instructions + session skeleton),
-                exposes programmatic APIs and CLI for CI/Architect consumption, and manages governance and migrations.
-      - id: MSPEC-003
-        title: "Principles"
-        tasks:
-          - |
-            principles:
-              - "Schema-first: all public shapes live under /schemas and are versioned."
-              - "Determinism: identical inputs must produce identical bootstrap artifacts."
-              - "Governance: breaking changes require migration guides and downstream pinning."
-              - "No secrets: specs must not contain secrets; secrets are external references."
-              - "Auditability: every change must be recorded with actor, timestamp, and diff."
-      - id: MSPEC-004
-        title: "Scope"
-        tasks:
-          - |
-            scope:
-              responsibilities:
-                - authoritative storage of product specs, checklists, and gpt-instructions
-                - schema registry and schema validation service
-                - deterministic bootstrap artifact generation and versioning
-                - API and CLI for product lifecycle operations (create, update, validate, generate)
-                - scheduler for periodic/regenerative bootstrap generation
-                - webhook ingestion for Implementor #FEEDBACK_CONTRACT and CI audit results
-                - governance workflows (deprecation, migration, version pinning)
-                - artifact storage, metadata DB, and backup
-              out_of_scope:
-                - runtime execution of pillar code (concrete pillars run their own code)
-                - platform network gateway and auth proxy (handled by platform/gateway)
-                - secret manager storage for sensitive values (use external secret manager)
-
-  # ============================================================
-  # PHASE 2 — GOVERNANCE & VERSIONING
-  # ============================================================
-  - phase: governance_and_versioning
-    summary: "Capture responsibility matrix, versioning policy, and governance commitments."
-    items:
-      - id: MSPEC-005
-        title: "Responsibility matrix"
-        tasks:
-          - |
-            responsibility_matrix:
-              canonical_serializer: guardsuite-core (future)
-              evaluator_pipeline: guard-template (implementation) / concrete pillars (consumers)
-              issue_model: guardsuite-core (future) / dev-shim (template)
-              rule_bundles: concrete pillars
-              fixpacks: concrete pillars (catalog indexed by guard-specs)
-              schemas: guard-specs (registry) + guard-template-owned shared schemas
-              determinism_contract: guard-specs (policy enforcement) + guard-template (implementation)
-              bootstrap_artifacts: guard-specs (generation) / object_store (storage)
-      - id: MSPEC-006
-        title: "Versioning policy"
-        tasks:
-          - |
-            versioning_policy:
-              - follow_semver: true
-              - breaking_changes_require: major
-              - schema_changes_require: minor_or_major (explicit per-schema rule)
-              - downstream_pillars_must_pin_template_version: true
-              - migration_guides_required_for_major_versions
-              - require_changelog_fragment_on_update: true
-
-  # ============================================================
-  # PHASE 3 — DATA MODEL & SCHEMAS
-  # ============================================================
-  - phase: data_model_and_schemas
-    summary: "Define canonical records and schema registry expectations."
-    items:
-      - id: MSPEC-007
-        title: "Data model"
-        tasks:
-          - |
-            data_model:
-              product_record:
-                id: string  # unique, lowercase-dashed
-                name: string
-                description: string
-                maintainers: list[string]
-                status: enum(draft, active, deprecated)
-                spec_yaml: text
-                checklist_yaml: text
-                gpt_instructions_yaml: text
-                schemas: list[string]
-                tags: list[string]
-                bootstrap_versions:
-                  - version_hash: string
-                    timestamp: timestamp
-                    artifact_path: string
-                latest_bootstrap: string
-                validation_report: object
-                created_at: timestamp
-                updated_at: timestamp
-              bootstrap_artifact:
-                product_id: string
-                version_hash: string
-                timestamp: timestamp
-                artifact: object
-                validation_errors: list[string]
-                incomplete: boolean
-              feedback_contract:
-                product_id: string
-                task_id: string
-                status: enum(done, blocked, issue, already_done)
-                summary: string
-                details: object
-                timestamp: timestamp
-      - id: MSPEC-008
-        title: "Schema registry"
-        tasks:
-          - |
-            schemas:
-              location: /schemas
-              required:
-                - product_schema.yml
-                - checklist_schema.yml
-                - gpt_instructions_schema.yml
-                - bootstrap_schema.yml
-                - cli_output.json
-                - cli_error.json
-                - fixpack_schema.yml
-              versioning:
-                - per-schema semver
-                - changes must include compatibility guidance
-                - schema PRs require automated backward-compatibility checks
-
-  # ============================================================
-  # PHASE 4 — API & CLI SURFACE
-  # ============================================================
-  - phase: api_and_cli_surface
-    summary: "Expose HTTP API, roles, and CLI interface requirements."
-    items:
-      - id: MSPEC-009
-        title: "API endpoints"
-        tasks:
-          - |
-            api:
-              base_path: /api/v1
-              auth: bearer_token
-              roles:
-                - reader
-                - writer
-                - ci
-                - admin
-              openapi: openapi.yaml
-              endpoints:
-                - GET  /products
-                  desc: list products (paginated)
-                  auth: reader
-                - POST /products
-                  desc: create product (require spec + checklist + gpt-instructions)
-                  auth: writer
-                  body: { id, spec_yaml, checklist_yaml, gpt_instructions_yaml, maintainers }
-                - GET  /products/{id}
-                  desc: fetch full product record
-                  auth: reader
-                - PATCH /products/{id}
-                  desc: partial update (replace YAMLs or metadata)
-                  auth: writer
-                - DELETE /products/{id}
-                  desc: deprecate product (status change) — admin confirmation
-                  auth: admin
-                - POST /products/{id}/validate
-                  desc: run schema + master-spec validations
-                  auth: ci
-                - POST /products/{id}/bootstrap/generate
-                  desc: trigger synchronous bootstrap regen; returns metadata
-                  auth: ci
-                - GET  /products/{id}/bootstrap
-                  desc: return latest bootstrap artifact JSON
-                  auth: reader
-                - POST /products/{id}/audit
-                  desc: enqueue audit (used by /ai-dev-report flows)
-                  auth: writer
-                - POST /webhooks/scan-result
-                  desc: receive Implementor #FEEDBACK_CONTRACT and persist/update product state
-                  security: webhook_secret
-      - id: MSPEC-010
-        title: "CLI commands"
-        tasks:
-          - |
-            cli:
-              tool: guard-specs-cli
-              commands:
-                - product:create --id <id> --spec <file> --checklist <file> --instructions <file>
-                - product:update --id <id> --patch <file>
-                - bootstrap:generate --id <id> [--print]
-                - validate --id <id>
-                - product:list
-              default_output: JSON
-              ux_requirements:
-                - outputs must be copy-paste friendly for Architect sessions
-                - error codes should conform to /schemas/cli_error.json
-
-  # ============================================================
-  # PHASE 5 — BOOTSTRAP GENERATION PIPELINE
-  # ============================================================
-  - phase: bootstrap_generation_pipeline
-    summary: "Define artifact shape, algorithm, and determinism guarantees."
-    items:
-      - id: MSPEC-011
-        title: "Bootstrap generation"
-        tasks:
-          - |
-            bootstrap_generation:
-              purpose: produce deterministic JSON bootstrap artifact for Architect consumption
-              artifact_shape:
-                - metadata: { product_id, timestamp, version_hash, generator_version }
-                - spec: raw spec_yaml
-                - checklist: raw checklist_yaml
-                - gpt_instructions: raw gpt_instructions_yaml
-                - session_skeleton: { last_checklist_item: null, last_instruction_version: 0 }
-                - validation_report: []
-              algorithm:
-                - load YAMLs
-                - validate against schemas
-                - compose canonical JSON (canonical key ordering, list sorting rules)
-                - normalize environment-dependent fields (paths, runtime metadata)
-                - compute version_hash: sha256(canonical_json)[0:12]
-                - persist artifact to object_store and metadata DB
-                - optionally commit artifact to repo path /bootstraps/<product>.json (configurable)
-              determinism_requirements:
-                - canonical serialization consistent across platforms
-                - normalization: strip_absolute_paths, normalize_path_separators, remove_platform_specific_metadata
-                - snapshot test: generate 3x and assert identical version_hash
-
-  # ============================================================
-  # PHASE 6 — VALIDATION ENGINE & SCHEDULER
-  # ============================================================
-  - phase: validation_and_scheduler
-    summary: "Describe validation engine outputs and scheduler policies."
-    items:
-      - id: MSPEC-012
-        title: "Validation engine"
-        tasks:
-          - |
-            validation_engine:
-              features:
-                - schema validation (YAML -> JSON schema)
-                - cross-check spec vs checklist consistency
-                - no-secrets detection (disallow common secret patterns)
-                - checklist completeness: unique IDs, acceptance_criteria presence
-                - naming conformance (id format rules)
-                - fixpack references verification (if fixpack present)
-                - master_spec invariants enforcement (e.g., determinism flags)
-              output:
-                - structured validation_report with severity, file/line references, remediation hints
-              integration_points:
-                - API endpoints, CLI, scheduler, bootstrap generator, webhooks
-      - id: MSPEC-013
-        title: "Scheduler"
-        tasks:
-          - |
-            scheduler:
-              responsibilities:
-                - periodic artifact regeneration (default PT15M)
-                - incremental generation on git push / webhook triggers
-                - manage job queue with retries and exponential backoff
-              policies:
-                - do not replace artifact on validation failure
-                - on failure: store artifact as incomplete and notify maintainers
-                - admin override allowed for forced regeneration
-
-  # ============================================================
-  # PHASE 7 — STORAGE & WEBHOOKS
-  # ============================================================
-  - phase: storage_and_webhooks
-    summary: "Capture storage tiers and webhook ingestion controls."
-    items:
-      - id: MSPEC-014
-        title: "Storage layers"
-        tasks:
-          - |
-            storage:
-              metadata_db:
-                - Postgres (products, bootstrap_versions, validation_reports, changelog)
-              artifact_store:
-                - S3-compatible object store for bootstrap JSON artifacts
-              backups:
-                - daily DB snapshot retention 30 days
-                - artifact lifecycle policy: retain 12 months (configurable)
-      - id: MSPEC-015
-        title: "Webhooks"
-        tasks:
-          - |
-            webhooks:
-              endpoints:
-                - POST /webhooks/scan-result
-                  desc: ingest Implementor #FEEDBACK_CONTRACT
-                  security: HMAC signature using webhook_secret
-                  on_receive:
-                    - validate signature
-                    - persist feedback_contract
-                    - update product validation state or session_state
-                    - optionally trigger automated tasks (e.g., schedule re-validation)
-              secret_mana
-              secret_management:
-                - rotate webhook_secret monthly
-                - notify maintainers on rotation
-
-  # ============================================================
-  # PHASE 8 — GOVERNANCE, SECURITY & OBSERVABILITY
-  # ============================================================
-  - phase: governance_security_observability
-    summary: "Enforce change management, security, and telemetry controls."
-    items:
-      - id: MSPEC-016
-        title: "Governance"
-        tasks:
-          - |
-            governance:
-              change_management:
-                - all product updates must include changelog fragment
-                - breaking schema changes require RFC + two platform approvers
-                - deprecation warnings published at least 3 release cycles prior
-              migration_guides:
-                - required for any major schema or artifact contract change
-                - published under /docs/migrations/<schema>-vX-to-vY.md
-              audit_logging:
-                - record actor, commit_hash, diff, timestamp for writes
-      - id: MSPEC-017
-        title: "Security"
-        tasks:
-          - |
-            security:
-              auth:
-                - bearer token for API with RBAC
-                - roles: reader, writer, ci, admin
-              input_safety:
-                - specs cannot contain literal secrets (validation rule)
-                - redact PII in logs and validation reports
-              webhook_security:
-                - HMAC verification
-              supply_chain:
-                - dependency vulnerability scanning for guard-specs repo
-      - id: MSPEC-018
-        title: "Observability"
-        tasks:
-          - |
-            observability:
-              metrics:
-                - product_count
-                - validation_failures_total
-                - bootstrap_generation_duration_seconds
-                - scheduler_job_success_ratio
-                - api_error_rate
-              logging:
-                - structured JSON logs with request_id, actor, product_id
-              tracing:
-                - trace bootstrap generation paths
-              alerts:
-                - validation_failure_spike → paging
-                - scheduler_job_failure_rate > threshold → paging
-
-  # ============================================================
-  # PHASE 9 — TESTING & CI/CD
-  # ============================================================
-  - phase: testing_and_ci_cd
-    summary: "Maintain comprehensive testing strategy and CI gates."
-    items:
-      - id: MSPEC-019
-        title: "Testing"
-        tasks:
-          - |
-            testing:
-              unit_tests:
-                - schema validators
-                - canonical serializer
-                - bootstrap composer
-                - auth/role enforcement
-              integration_tests:
-                - create product → validate → generate → fetch artifact (end-to-end)
-                - webhook flow ingestion
-              determinism_tests:
-                - run bootstrap generation 3x with identical inputs → assert identical hashes
-              e2e_tests:
-                - simulate Architect session: CLI copy → Architect consumes artifact → Implementor feedback cycle
-              test_data:
-                - include sample product specs: simple, intermediate, complex
-                - include malformed specs for negative tests
-      - id: MSPEC-020
-        title: "CI/CD"
-        tasks:
-          - |
-            ci_cd:
-              pipelines:
-                - pre-commit: linters, schema validate (fast)
-                - pre-merge: unit + integration + determinism tests
-                - release: tag, publish openapi.yaml, run smoke tests (staging)
-              releases:
-                - semantic versioning
-                - changelog fragment required
-                - publish release notes and migration guidance for major bumps
-
-  # ============================================================
-  # PHASE 10 — DOCUMENTATION & INTEGRATIONS
-  # ============================================================
-  - phase: documentation_and_integrations
-    summary: "Document OpenAPI, developer experience, integration, and deliverables."
-    items:
-      - id: MSPEC-021
-        title: "OpenAPI"
-        tasks:
-          - |
-            openapi:
-              file: openapi.yaml
-              must_document:
-                - endpoints and request/response schemas
-                - auth flows and scopes
-                - example requests for CLI consumption
-      - id: MSPEC-022
-        title: "Developer experience"
-        tasks:
-          - |
-            developer_experience:
-              docs:
-                - getting_started.md (authoring product spec & checklist)
-                - schema_guides.md (writing valid schemas)
-                - bootstrap_consumer.md (how to consume artifact in Architect)
-                - api_reference.md (human readable)
-                - migration_guide_template.md
-              cli expectations:
-                - guard-specs-cli should produce JSON suitable for Architect paste
-                - include helpful error messages and remediation hints
-      - id: MSPEC-023
-        title: "Integration points"
-        tasks:
-          - |
-            integration_points:
-              - guard-template: read shared schemas, guidance and bootstrapping patterns
-              - guard-repos (concrete pillars): push audits/webhooks and retrieve artifacts
-              - CI systems: call /products/{id}/validate pre-merge
-              - Architect (browser): GET /products/{id}/bootstrap and paste into session
-      - id: MSPEC-024
-        title: "Deliverables"
-        tasks:
-          - |
-            deliverables:
-              initial:
-                - repos/guard-specs/spec.yml
-                - repos/guard-specs/checklist.yml
-                - /schemas/product_schema.yml
-                - /schemas/checklist_schema.yml
-                - /schemas/gpt_instructions_schema.yml
-                - /schemas/bootstrap_schema.yml
-                - /schemas/cli_output.json
-                - /schemas/cli_error.json
-                - openapi.yaml
-                - guard-specs-cli skeleton
-                - scheduler job definitions
-                - CI workflow manifests
-                - docs for authoring, migration, and bootstrap consumption
-              ongoing:
-                - migration guides on major changes
-                - sample specs for canonical pillar types
-
-  # ============================================================
-  # PHASE 11 — ACCEPTANCE, INIT, AND RUNBOOKS
-  # ============================================================
-  - phase: acceptance_and_runbook
-    summary: "Capture initialization, acceptance, runbooks, and appendix flows."
-    items:
-      - id: MSPEC-025
-        title: "Initialization requirements"
-        tasks:
-          - |
-            initialization_requirements:
-              - "poetry install must succeed without flags"
-              - "pytest -q must pass in CI using included test data"
-              - "guard-specs-cli --help must succeed"
-              - "schema-validation script must validate /schemas directory"
-              - "catalog/index.yml (if present) must be valid"
-      - id: MSPEC-026
-        title: "Acceptance criteria"
-        tasks:
-          - |
-            acceptance_criteria:
-              - end_to_end: create product → validate → generate bootstrap → Architect consumes artifact
-              - determinism: repeated generation of identical inputs yields identical version_hash (3x)
-              - governance: schema change flow and migration guide exist for major bumps
-              - security: RBAC enforced for writes; webhooks validated
-              - docs: authoring guide and API reference present and verified
-      - id: MSPEC-027
-        title: "Operational runbook"
-        tasks:
-          - |
-            operational_runbook:
-              maintenance_tasks:
-                - rotate_webhook_secret: monthly
-                - run_schema_compat_check: on schema PR
-                - full_bootstrap_regeneration: weekly (configurable)
-                - backup_metadata_db: daily
-              incident_response:
-                - scheduler_failure: page oncall, requeue failed jobs
-                - deterministic_test_failure: mark artifact incomplete, notify maintainers
-                - validation_failure_spike: open incident and triage
-      - id: MSPEC-028
-        title: "Appendix"
-        tasks:
-          - |
-            appendix:
-              sample_product_flow:
-                - "1. user POST /products with spec+checklist+instructions"
-                - "2. guard-specs validates and stores product"
-                - "3. guard-specs generates bootstrap artifact and persists metadata"
-                - "4. Architect fetches artifact and begins session"
-                - "5. Implementor runs tasks and may POST #FEEDBACK_CONTRACT to /webhooks/scan-result"
-              uploaded_draft_trace: "/mnt/data/guardsuite-specs.yml"
-
-legacy_spec_dump: |-
-  # repos/guard-specs/spec.yml
-  # GuardSuite — guard-specs Service Specification (authoritative)
-  # Purpose: canonical product spec & checklist registry, schema registry,
-  # validation engine, deterministic bootstrap generator, and governance control plane.
-
-  metadata:
-    id: guard-specs
-    name: GuardSpecs
-    title: GuardSuite Specs Service
-    version: 1.0.0
-    owner: GuardSuite Platform Team
-    contact: platform@guardsuite.internal
-    created: 2025-11-24
-    repo_path: repos/guard-specs
-    source_draft_reference: "/mnt/data/guardsuite-specs.yml" # session upload (traceability only)
-
-  mission:
-    - "Be the canonical source-of-truth for product specs, checklists, and gpt-instructions across GuardSuite."
-    - "Produce deterministic, validated, versioned bootstrap artifacts consumable by Architect sessions and tooling."
-    - "Enforce schema-first governance, versioning discipline, and lifecycle management across the suite."
-
-  purpose:
-    summary: >
-      guard-specs stores product YAML specs and checklists, validates them against the schema registry,
-      generates deterministic bootstrap artifacts (spec + checklist + gpt-instructions + session skeleton),
-      exposes programmatic APIs and CLI for CI/Architect consumption, and manages governance and migrations.
-
-  principles:
-    - "Schema-first: all public shapes live under /schemas and are versioned."
-    - "Determinism: identical inputs must produce identical bootstrap artifacts."
-    - "Governance: breaking changes require migration guides and downstream pinning."
-    - "No secrets: specs must not contain secrets; secrets are external references."
-    - "Auditability: every change must be recorded with actor, timestamp, and diff."
-
-  scope:
-    responsibilities:
-      - authoritative storage of product specs, checklists, and gpt-instructions
-      - schema registry and schema validation service
-      - deterministic bootstrap artifact generation and versioning
-      - API and CLI for product lifecycle operations (create, update, validate, generate)
-      - scheduler for periodic/regenerative bootstrap generation
-      - webhook ingestion for Implementor #FEEDBACK_CONTRACT and CI audit results
-      - governance workflows (deprecation, migration, version pinning)
-      - artifact storage, metadata DB, and backup
-    out_of_scope:
-      - runtime execution of pillar code (concrete pillars run their own code)
-      - platform network gateway and auth proxy (handled by platform/gateway)
-      - secret manager storage for sensitive values (use external secret manager)
-
-  responsibility_matrix:
-    canonical_serializer: guardsuite-core (future)
-    evaluator_pipeline: guard-template (implementation) / concrete pillars (consumers)
-    issue_model: guardsuite-core (future) / dev-shim (template)
-    rule_bundles: concrete pillars
-    fixpacks: concrete pillars (catalog indexed by guard-specs)
-    schemas: guard-specs (registry) + guard-template-owned shared schemas
-    determinism_contract: guard-specs (policy enforcement) + guard-template (implementation)
-    bootstrap_artifacts: guard-specs (generation) / object_store (storage)
-
-  versioning_policy:
-    - follow_semver: true
-    - breaking_changes_require: major
-    - schema_changes_require: minor_or_major (explicit per-schema rule)
-    - downstream_pillars_must_pin_template_version: true
-    - migration_guides_required_for_major_versions
-    - require_changelog_fragment_on_update: true
-
-  data_model:
-    product_record:
-      id: string  # unique, lowercase-dashed
-      name: string
-      description: string
-      maintainers: list[string]
-      status: enum(draft, active, deprecated)
-      spec_yaml: text
-      checklist_yaml: text
-      gpt_instructions_yaml: text
-      schemas: list[string]
-      tags: list[string]
-      bootstrap_versions:
-        - version_hash: string
-          timestamp: timestamp
-          artifact_path: string
-      latest_bootstrap: string
-      validation_report: object
-      created_at: timestamp
-      updated_at: timestamp
-    bootstrap_artifact:
-      product_id: string
-      version_hash: string
-      timestamp: timestamp
-      artifact: object
-      validation_errors: list[string]
-      incomplete: boolean
-    feedback_contract:
-      product_id: string
-      task_id: string
-      status: enum(done, blocked, issue, already_done)
-      summary: string
-      details: object
-      timestamp: timestamp
-
-  schemas:
-    location: /schemas
-    required:
-      - product_schema.yml
-      - checklist_schema.yml
-      - gpt_instructions_schema.yml
-      - bootstrap_schema.yml
-      - cli_output.json
-      - cli_error.json
-      - fixpack_schema.yml
-    versioning:
-      - per-schema semver
-      - changes must include compatibility guidance
-      - schema PRs require automated backward-compatibility checks
-
-  api:
-    base_path: /api/v1
-    auth: bearer_token
-    roles:
-      - reader
-      - writer
-      - ci
-      - admin
-    openapi: openapi.yaml
-    endpoints:
-      - GET  /products
-        desc: list products (paginated)
-        auth: reader
-      - POST /products
-        desc: create product (require spec + checklist + gpt-instructions)
-        auth: writer
-        body: { id, spec_yaml, checklist_yaml, gpt_instructions_yaml, maintainers }
-      - GET  /products/{id}
-        desc: fetch full product record
-        auth: reader
-      - PATCH /products/{id}
-        desc: partial update (replace YAMLs or metadata)
-        auth: writer
-      - DELETE /products/{id}
-        desc: deprecate product (status change) — admin confirmation
-        auth: admin
-      - POST /products/{id}/validate
-        desc: run schema + master-spec validations
-        auth: ci
-      - POST /products/{id}/bootstrap/generate
-        desc: trigger synchronous bootstrap regen; returns metadata
-        auth: ci
-      - GET  /products/{id}/bootstrap
-        desc: return latest bootstrap artifact JSON
-        auth: reader
-      - POST /products/{id}/audit
-        desc: enqueue audit (used by /ai-dev-report flows)
-        auth: writer
-      - POST /webhooks/scan-result
-        desc: receive Implementor #FEEDBACK_CONTRACT and persist/update product state
-        security: webhook_secret
-
-  cli:
-    tool: guard-specs-cli
-    commands:
-      - product:create --id <id> --spec <file> --checklist <file> --instructions <file>
-      - product:update --id <id> --patch <file>
-      - bootstrap:generate --id <id> [--print]
-      - validate --id <id>
-      - product:list
-    default_output: JSON
-    ux_requirements:
-      - outputs must be copy-paste friendly for Architect sessions
-      - error codes should conform to /schemas/cli_error.json
-
-  bootstrap_generation:
-    purpose: produce deterministic JSON bootstrap artifact for Architect consumption
-    artifact_shape:
-      - metadata: { product_id, timestamp, version_hash, generator_version }
-      - spec: raw spec_yaml
-      - checklist: raw checklist_yaml
-      - gpt_instructions: raw gpt_instructions_yaml
-      - session_skeleton: { last_checklist_item: null, last_instruction_version: 0 }
-      - validation_report: []
-    algorithm:
-      - load YAMLs
-      - validate against schemas
-      - compose canonical JSON (canonical key ordering, list sorting rules)
-      - normalize environment-dependent fields (paths, runtime metadata)
-      - compute version_hash: sha256(canonical_json)[0:12]
-      - persist artifact to object_store and metadata DB
-      - (optionally) commit artifact to repo path /bootstraps/<product>.json (configurable)
-    determinism_requirements:
-      - canonical serialization consistent across platforms
-      - normalization: strip_absolute_paths, normalize_path_separators, remove_platform_specific_metadata
-      - snapshot test: generate 3x and assert identical version_hash
-
-  validation_engine:
-    features:
-      - schema validation (YAML -> JSON schema)
-      - cross-check spec vs checklist consistency
-      - no-secrets detection (disallow common secret patterns)
-      - checklist completeness: unique IDs, acceptance_criteria presence
-      - naming conformance (id format rules)
-      - fixpack references verification (if fixpack present)
-      - master_spec invariants enforcement (e.g., determinism flags)
-    output:
-      - structured validation_report with severity, file/line references, remediation hints
-    integration_points:
-      - API endpoints, CLI, scheduler, bootstrap generator, webhooks
-
-  scheduler:
-    responsibilities:
-      - periodic artifact regeneration (default PT15M)
-      - incremental generation on git push / webhook triggers
-      - manage job queue with retries and exponential backoff
-    policies:
-      - do not replace artifact on validation failure
-      - on failure: store artifact as incomplete and notify maintainers
-      - admin override allowed for forced regeneration
-
-  storage:
-    metadata_db:
-      - Postgres (products, bootstrap_versions, validation_reports, changelog)
-    artifact_store:
-      - S3-compatible object store for bootstrap JSON artifacts
-    backups:
-      - daily DB snapshot retention 30 days
-      - artifact lifecycle policy: retain 12 months (configurable)
-
-  webhooks:
-    endpoints:
-      - POST /webhooks/scan-result
-        desc: ingest Implementor #FEEDBACK_CONTRACT
-        security: HMAC signature using webhook_secret
-        on_receive:
-          - validate signature
-          - persist feedback_contract
-          - update product validation state or session_state
-          - optionally trigger automated tasks (e.g., schedule re-validation)
-    secret_management:
-      - rotate webhook_secret monthly
-      - notify maintainers on rotation
-
-  governance:
-    change_management:
-      - all product updates must include changelog fragment
-      - breaking schema changes require RFC + two platform approvers
-      - deprecation warnings published at least 3 release cycles prior
-    migration_guides:
-      - required for any major schema or artifact contract change
-      - published under /docs/migrations/<schema>-vX-to-vY.md
-    audit_logging:
-      - record actor, commit_hash, diff, timestamp for writes
-
-  security:
-    auth:
-      - bearer token for API with RBAC
-      - roles: reader, writer, ci, admin
-    input_safety:
-      - specs cannot contain literal secrets (validation rule)
-      - redact PII in logs and validation reports
-    webhook_security:
-      - HMAC verification
-    supply_chain:
-      - dependency vulnerability scanning for guard-specs repo
-
-  observability:
-    metrics:
-      - product_count
-      - validation_failures_total
-      - bootstrap_generation_duration_seconds
-      - scheduler_job_success_ratio
-      - api_error_rate
-    logging:
-      - structured JSON logs with request_id, actor, product_id
-    tracing:
-      - trace bootstrap generation paths
-    alerts:
-      - validation_failure_spike → paging
-      - scheduler_job_failure_rate > threshold → paging
-
-  testing:
-    unit_tests:
-      - schema validators
-      - canonical serializer
-      - bootstrap composer
-      - auth/role enforcement
-    integration_tests:
-      - create product → validate → generate → fetch artifact (end-to-end)
-      - webhook flow ingestion
-    determinism_tests:
-      - run bootstrap generation 3x with identical inputs → assert identical hashes
-    e2e_tests:
-      - simulate Architect session: CLI copy → Architect consumes artifact → Implementor feedback cycle
-    test_data:
-      - include sample product specs: simple, intermediate, complex
-      - include malformed specs for negative tests
-
-  ci_cd:
-    pipelines:
-      - pre-commit: linters, schema validate (fast)
-      - pre-merge: unit + integration + determinism tests
-      - release: tag, publish openapi.yaml, run smoke tests (staging)
-    releases:
-      - semantic versioning
-      - changelog fragment required
-      - publish release notes and migration guidance for major bumps
-
-  openapi:
-    file: openapi.yaml
-    must_document:
-      - endpoints and request/response schemas
-      - auth flows and scopes
-      - example requests for CLI consumption
-
-  developer_experience:
-    docs:
-      - getting_started.md (authoring product spec & checklist)
-      - schema_guides.md (writing valid schemas)
-      - bootstrap_consumer.md (how to consume artifact in Architect)
-      - api_reference.md (human readable)
-      - migration_guide_template.md
-    cli:
-      - guard-specs-cli should produce JSON suitable for Architect paste
-      - include helpful error messages and remediation hints
-
-  integration_points:
-    - guard-template: read shared schemas, guidance and bootstrapping patterns
-    - guard-repos (concrete pillars): push audits/webhooks and retrieve artifacts
-    - CI systems: call /products/{id}/validate pre-merge
-    - Architect (browser): GET /products/{id}/bootstrap and paste into session
-
-  deliverables:
-    initial:
-      - repos/guard-specs/spec.yml
-      - repos/guard-specs/checklist.yml
-      - /schemas/product_schema.yml
-      - /schemas/checklist_schema.yml
-      - /schemas/gpt_instructions_schema.yml
-      - /schemas/bootstrap_schema.yml
-      - /schemas/cli_output.json
-      - /schemas/cli_error.json
-      - openapi.yaml
-      - guard-specs-cli skeleton
-      - scheduler job definitions
-      - CI workflow manifests
-      - docs for authoring, migration, and bootstrap consumption
-    ongoing:
-      - migration guides on major changes
-      - sample specs for canonical pillar types
-
-  initialization_requirements:
-    - "poetry install must succeed without flags"
-    - "pytest -q must pass in CI using included test data"
-    - "guard-specs-cli --help must succeed"
-    - "schema-validation script must validate /schemas directory"
-    - "catalog/index.yml (if present) must be valid"
-
-  acceptance_criteria:
-    - end_to_end: create product → validate → generate bootstrap → Architect consumes artifact
-    - determinism: repeated generation of identical inputs yields identical version_hash (3x)
-    - governance: schema change flow and migration guide exist for major bumps
-    - security: RBAC enforced for writes; webhooks validated
-    - docs: authoring guide and API reference present and verified
-
-  operational_runbook:
-    maintenance_tasks:
-      - rotate_webhook_secret: monthly
-      - run_schema_compat_check: on schema PR
-      - full_bootstrap_regeneration: weekly (configurable)
-      - backup_metadata_db: daily
-    incident_response:
-      - scheduler_failure: page oncall, requeue failed jobs
-      - deterministic_test_failure: mark artifact incomplete, notify maintainers
-      - validation_failure_spike: open incident and triage
-
-  appendix:
-    sample_product_flow:
-      - "1. user POST /products with spec+checklist+instructions"
-      - "2. guard-specs validates and stores product"
-      - "3. guard-specs generates bootstrap artifact and persists metadata"
-      - "4. Architect fetches artifact and begins session"
-      - "5. Implementor runs tasks and may POST #FEEDBACK_CONTRACT to /webhooks/scan-result"
-    uploaded_draft_trace: "/mnt/data/guardsuite-specs.yml" # preserved for session traceability
-
-  # End of guard-specs/spec.yml
+    depends_on_pipeline: true
+  documentation_requirements:
+    readme_required: true
+    product_docs_required: true
+    api_reference_required: true
+    examples_required: true
+    changelog_required: true
+    release_notes_required: true
+  evaluator_requirements:
+    pipeline_must_match_template: true
+    canonicalization_required: true
+    wasm_safety_required: true
+    deterministic_output_required: true
+    timestamp_normalization_required: true
+    prohibited_overrides:
+    - canonical.output_contract
+    - engine.payload_serializer
+    - evaluator.stage_order
+    - bootstrap.generator_contract
+  fixpack_requirements:
+    fixpack_catalog_required: false
+    fixpack_metadata_required: false
+    difficulty_taxonomy_required: false
+    patch_hashing_required: false
+    remediation_examples_required: false
+  id: guardsuite_master_spec_checklist
+  legacy_spec_dump: "# repos/guard-specs/spec.yml\n# GuardSuite — guard-specs Service\
+    \ Specification (authoritative)\n# Purpose: canonical product spec & checklist\
+    \ registry, schema registry,\n# validation engine, deterministic bootstrap generator,\
+    \ and governance control plane.\n\nmetadata:\n  id: guard-specs\n  name: GuardSpecs\n\
+    \  title: GuardSuite Specs Service\n  version: 1.0.0\n  owner: GuardSuite Platform\
+    \ Team\n  contact: platform@guardsuite.internal\n  created: 2025-11-24\n  repo_path:\
+    \ repos/guard-specs\n  source_draft_reference: \"/mnt/data/guardsuite-specs.yml\"\
+    \ # session upload (traceability only)\n\nmission:\n  - \"Be the canonical source-of-truth\
+    \ for product specs, checklists, and gpt-instructions across GuardSuite.\"\n \
+    \ - \"Produce deterministic, validated, versioned bootstrap artifacts consumable\
+    \ by Architect sessions and tooling.\"\n  - \"Enforce schema-first governance,\
+    \ versioning discipline, and lifecycle management across the suite.\"\n\npurpose:\n\
+    \  summary: >\n    guard-specs stores product YAML specs and checklists, validates\
+    \ them against the schema registry,\n    generates deterministic bootstrap artifacts\
+    \ (spec + checklist + gpt-instructions + session skeleton),\n    exposes programmatic\
+    \ APIs and CLI for CI/Architect consumption, and manages governance and migrations.\n\
+    \nprinciples:\n  - \"Schema-first: all public shapes live under /schemas and are\
+    \ versioned.\"\n  - \"Determinism: identical inputs must produce identical bootstrap\
+    \ artifacts.\"\n  - \"Governance: breaking changes require migration guides and\
+    \ downstream pinning.\"\n  - \"No secrets: specs must not contain secrets; secrets\
+    \ are external references.\"\n  - \"Auditability: every change must be recorded\
+    \ with actor, timestamp, and diff.\"\n\nscope:\n  responsibilities:\n    - authoritative\
+    \ storage of product specs, checklists, and gpt-instructions\n    - schema registry\
+    \ and schema validation service\n    - deterministic bootstrap artifact generation\
+    \ and versioning\n    - API and CLI for product lifecycle operations (create,\
+    \ update, validate, generate)\n    - scheduler for periodic/regenerative bootstrap\
+    \ generation\n    - webhook ingestion for Implementor #FEEDBACK_CONTRACT and CI\
+    \ audit results\n    - governance workflows (deprecation, migration, version pinning)\n\
+    \    - artifact storage, metadata DB, and backup\n  out_of_scope:\n    - runtime\
+    \ execution of pillar code (concrete pillars run their own code)\n    - platform\
+    \ network gateway and auth proxy (handled by platform/gateway)\n    - secret manager\
+    \ storage for sensitive values (use external secret manager)\n\nresponsibility_matrix:\n\
+    \  canonical_serializer: guardsuite-core (future)\n  evaluator_pipeline: guard-template\
+    \ (implementation) / concrete pillars (consumers)\n  issue_model: guardsuite-core\
+    \ (future) / dev-shim (template)\n  rule_bundles: concrete pillars\n  fixpacks:\
+    \ concrete pillars (catalog indexed by guard-specs)\n  schemas: guard-specs (registry)\
+    \ + guard-template-owned shared schemas\n  determinism_contract: guard-specs (policy\
+    \ enforcement) + guard-template (implementation)\n  bootstrap_artifacts: guard-specs\
+    \ (generation) / object_store (storage)\n\nversioning_policy:\n  - follow_semver:\
+    \ true\n  - breaking_changes_require: major\n  - schema_changes_require: minor_or_major\
+    \ (explicit per-schema rule)\n  - downstream_pillars_must_pin_template_version:\
+    \ true\n  - migration_guides_required_for_major_versions\n  - require_changelog_fragment_on_update:\
+    \ true\n\ndata_model:\n  product_record:\n    id: string  # unique, lowercase-dashed\n\
+    \    name: string\n    description: string\n    maintainers: list[string]\n  \
+    \  status: enum(draft, active, deprecated)\n    spec_yaml: text\n    checklist_yaml:\
+    \ text\n    gpt_instructions_yaml: text\n    schemas: list[string]\n    tags:\
+    \ list[string]\n    bootstrap_versions:\n      - version_hash: string\n      \
+    \  timestamp: timestamp\n        artifact_path: string\n    latest_bootstrap:\
+    \ string\n    validation_report: object\n    created_at: timestamp\n    updated_at:\
+    \ timestamp\n  bootstrap_artifact:\n    product_id: string\n    version_hash:\
+    \ string\n    timestamp: timestamp\n    artifact: object\n    validation_errors:\
+    \ list[string]\n    incomplete: boolean\n  feedback_contract:\n    product_id:\
+    \ string\n    task_id: string\n    status: enum(done, blocked, issue, already_done)\n\
+    \    summary: string\n    details: object\n    timestamp: timestamp\n\nschemas:\n\
+    \  location: /schemas\n  required:\n    - product_schema.yml\n    - checklist_schema.yml\n\
+    \    - gpt_instructions_schema.yml\n    - bootstrap_schema.yml\n    - cli_output.json\n\
+    \    - cli_error.json\n    - fixpack_schema.yml\n  versioning:\n    - per-schema\
+    \ semver\n    - changes must include compatibility guidance\n    - schema PRs\
+    \ require automated backward-compatibility checks\n\napi:\n  base_path: /api/v1\n\
+    \  auth: bearer_token\n  roles:\n    - reader\n    - writer\n    - ci\n    - admin\n\
+    \  openapi: openapi.yaml\n  endpoints:\n    - GET  /products\n      desc: list\
+    \ products (paginated)\n      auth: reader\n    - POST /products\n      desc:\
+    \ create product (require spec + checklist + gpt-instructions)\n      auth: writer\n\
+    \      body: { id, spec_yaml, checklist_yaml, gpt_instructions_yaml, maintainers\
+    \ }\n    - GET  /products/{id}\n      desc: fetch full product record\n      auth:\
+    \ reader\n    - PATCH /products/{id}\n      desc: partial update (replace YAMLs\
+    \ or metadata)\n      auth: writer\n    - DELETE /products/{id}\n      desc: deprecate\
+    \ product (status change) — admin confirmation\n      auth: admin\n    - POST\
+    \ /products/{id}/validate\n      desc: run schema + master-spec validations\n\
+    \      auth: ci\n    - POST /products/{id}/bootstrap/generate\n      desc: trigger\
+    \ synchronous bootstrap regen; returns metadata\n      auth: ci\n    - GET  /products/{id}/bootstrap\n\
+    \      desc: return latest bootstrap artifact JSON\n      auth: reader\n    -\
+    \ POST /products/{id}/audit\n      desc: enqueue audit (used by /ai-dev-report\
+    \ flows)\n      auth: writer\n    - POST /webhooks/scan-result\n      desc: receive\
+    \ Implementor #FEEDBACK_CONTRACT and persist/update product state\n      security:\
+    \ webhook_secret\n\ncli:\n  tool: guard-specs-cli\n  commands:\n    - product:create\
+    \ --id <id> --spec <file> --checklist <file> --instructions <file>\n    - product:update\
+    \ --id <id> --patch <file>\n    - bootstrap:generate --id <id> [--print]\n   \
+    \ - validate --id <id>\n    - product:list\n  default_output: JSON\n  ux_requirements:\n\
+    \    - outputs must be copy-paste friendly for Architect sessions\n    - error\
+    \ codes should conform to /schemas/cli_error.json\n\nbootstrap_generation:\n \
+    \ purpose: produce deterministic JSON bootstrap artifact for Architect consumption\n\
+    \  artifact_shape:\n    - metadata: { product_id, timestamp, version_hash, generator_version\
+    \ }\n    - spec: raw spec_yaml\n    - checklist: raw checklist_yaml\n    - gpt_instructions:\
+    \ raw gpt_instructions_yaml\n    - session_skeleton: { last_checklist_item: null,\
+    \ last_instruction_version: 0 }\n    - validation_report: []\n  algorithm:\n \
+    \   - load YAMLs\n    - validate against schemas\n    - compose canonical JSON\
+    \ (canonical key ordering, list sorting rules)\n    - normalize environment-dependent\
+    \ fields (paths, runtime metadata)\n    - compute version_hash: sha256(canonical_json)[0:12]\n\
+    \    - persist artifact to object_store and metadata DB\n    - (optionally) commit\
+    \ artifact to repo path /bootstraps/<product>.json (configurable)\n  determinism_requirements:\n\
+    \    - canonical serialization consistent across platforms\n    - normalization:\
+    \ strip_absolute_paths, normalize_path_separators, remove_platform_specific_metadata\n\
+    \    - snapshot test: generate 3x and assert identical version_hash\n\nvalidation_engine:\n\
+    \  features:\n    - schema validation (YAML -> JSON schema)\n    - cross-check\
+    \ spec vs checklist consistency\n    - no-secrets detection (disallow common secret\
+    \ patterns)\n    - checklist completeness: unique IDs, acceptance_criteria presence\n\
+    \    - naming conformance (id format rules)\n    - fixpack references verification\
+    \ (if fixpack present)\n    - master_spec invariants enforcement (e.g., determinism\
+    \ flags)\n  output:\n    - structured validation_report with severity, file/line\
+    \ references, remediation hints\n  integration_points:\n    - API endpoints, CLI,\
+    \ scheduler, bootstrap generator, webhooks\n\nscheduler:\n  responsibilities:\n\
+    \    - periodic artifact regeneration (default PT15M)\n    - incremental generation\
+    \ on git push / webhook triggers\n    - manage job queue with retries and exponential\
+    \ backoff\n  policies:\n    - do not replace artifact on validation failure\n\
+    \    - on failure: store artifact as incomplete and notify maintainers\n    -\
+    \ admin override allowed for forced regeneration\n\nstorage:\n  metadata_db:\n\
+    \    - Postgres (products, bootstrap_versions, validation_reports, changelog)\n\
+    \  artifact_store:\n    - S3-compatible object store for bootstrap JSON artifacts\n\
+    \  backups:\n    - daily DB snapshot retention 30 days\n    - artifact lifecycle\
+    \ policy: retain 12 months (configurable)\n\nwebhooks:\n  endpoints:\n    - POST\
+    \ /webhooks/scan-result\n      desc: ingest Implementor #FEEDBACK_CONTRACT\n \
+    \     security: HMAC signature using webhook_secret\n      on_receive:\n     \
+    \   - validate signature\n        - persist feedback_contract\n        - update\
+    \ product validation state or session_state\n        - optionally trigger automated\
+    \ tasks (e.g., schedule re-validation)\n  secret_management:\n    - rotate webhook_secret\
+    \ monthly\n    - notify maintainers on rotation\n\ngovernance:\n  change_management:\n\
+    \    - all product updates must include changelog fragment\n    - breaking schema\
+    \ changes require RFC + two platform approvers\n    - deprecation warnings published\
+    \ at least 3 release cycles prior\n  migration_guides:\n    - required for any\
+    \ major schema or artifact contract change\n    - published under /docs/migrations/<schema>-vX-to-vY.md\n\
+    \  audit_logging:\n    - record actor, commit_hash, diff, timestamp for writes\n\
+    \nsecurity:\n  auth:\n    - bearer token for API with RBAC\n    - roles: reader,\
+    \ writer, ci, admin\n  input_safety:\n    - specs cannot contain literal secrets\
+    \ (validation rule)\n    - redact PII in logs and validation reports\n  webhook_security:\n\
+    \    - HMAC verification\n  supply_chain:\n    - dependency vulnerability scanning\
+    \ for guard-specs repo\n\nobservability:\n  metrics:\n    - product_count\n  \
+    \  - validation_failures_total\n    - bootstrap_generation_duration_seconds\n\
+    \    - scheduler_job_success_ratio\n    - api_error_rate\n  logging:\n    - structured\
+    \ JSON logs with request_id, actor, product_id\n  tracing:\n    - trace bootstrap\
+    \ generation paths\n  alerts:\n    - validation_failure_spike → paging\n    -\
+    \ scheduler_job_failure_rate > threshold → paging\n\ntesting:\n  unit_tests:\n\
+    \    - schema validators\n    - canonical serializer\n    - bootstrap composer\n\
+    \    - auth/role enforcement\n  integration_tests:\n    - create product → validate\
+    \ → generate → fetch artifact (end-to-end)\n    - webhook flow ingestion\n  determinism_tests:\n\
+    \    - run bootstrap generation 3x with identical inputs → assert identical hashes\n\
+    \  e2e_tests:\n    - simulate Architect session: CLI copy → Architect consumes\
+    \ artifact → Implementor feedback cycle\n  test_data:\n    - include sample product\
+    \ specs: simple, intermediate, complex\n    - include malformed specs for negative\
+    \ tests\n\nci_cd:\n  pipelines:\n    - pre-commit: linters, schema validate (fast)\n\
+    \    - pre-merge: unit + integration + determinism tests\n    - release: tag,\
+    \ publish openapi.yaml, run smoke tests (staging)\n  releases:\n    - semantic\
+    \ versioning\n    - changelog fragment required\n    - publish release notes and\
+    \ migration guidance for major bumps\n\nopenapi:\n  file: openapi.yaml\n  must_document:\n\
+    \    - endpoints and request/response schemas\n    - auth flows and scopes\n \
+    \   - example requests for CLI consumption\n\ndeveloper_experience:\n  docs:\n\
+    \    - getting_started.md (authoring product spec & checklist)\n    - schema_guides.md\
+    \ (writing valid schemas)\n    - bootstrap_consumer.md (how to consume artifact\
+    \ in Architect)\n    - api_reference.md (human readable)\n    - migration_guide_template.md\n\
+    \  cli:\n    - guard-specs-cli should produce JSON suitable for Architect paste\n\
+    \    - include helpful error messages and remediation hints\n\nintegration_points:\n\
+    \  - guard-template: read shared schemas, guidance and bootstrapping patterns\n\
+    \  - guard-repos (concrete pillars): push audits/webhooks and retrieve artifacts\n\
+    \  - CI systems: call /products/{id}/validate pre-merge\n  - Architect (browser):\
+    \ GET /products/{id}/bootstrap and paste into session\n\ndeliverables:\n  initial:\n\
+    \    - repos/guard-specs/spec.yml\n    - repos/guard-specs/checklist.yml\n   \
+    \ - /schemas/product_schema.yml\n    - /schemas/checklist_schema.yml\n    - /schemas/gpt_instructions_schema.yml\n\
+    \    - /schemas/bootstrap_schema.yml\n    - /schemas/cli_output.json\n    - /schemas/cli_error.json\n\
+    \    - openapi.yaml\n    - guard-specs-cli skeleton\n    - scheduler job definitions\n\
+    \    - CI workflow manifests\n    - docs for authoring, migration, and bootstrap\
+    \ consumption\n  ongoing:\n    - migration guides on major changes\n    - sample\
+    \ specs for canonical pillar types\n\ninitialization_requirements:\n  - \"poetry\
+    \ install must succeed without flags\"\n  - \"pytest -q must pass in CI using\
+    \ included test data\"\n  - \"guard-specs-cli --help must succeed\"\n  - \"schema-validation\
+    \ script must validate /schemas directory\"\n  - \"catalog/index.yml (if present)\
+    \ must be valid\"\n\nacceptance_criteria:\n  - end_to_end: create product → validate\
+    \ → generate bootstrap → Architect consumes artifact\n  - determinism: repeated\
+    \ generation of identical inputs yields identical version_hash (3x)\n  - governance:\
+    \ schema change flow and migration guide exist for major bumps\n  - security:\
+    \ RBAC enforced for writes; webhooks validated\n  - docs: authoring guide and\
+    \ API reference present and verified\n\noperational_runbook:\n  maintenance_tasks:\n\
+    \    - rotate_webhook_secret: monthly\n    - run_schema_compat_check: on schema\
+    \ PR\n    - full_bootstrap_regeneration: weekly (configurable)\n    - backup_metadata_db:\
+    \ daily\n  incident_response:\n    - scheduler_failure: page oncall, requeue failed\
+    \ jobs\n    - deterministic_test_failure: mark artifact incomplete, notify maintainers\n\
+    \    - validation_failure_spike: open incident and triage\n\nappendix:\n  sample_product_flow:\n\
+    \    - \"1. user POST /products with spec+checklist+instructions\"\n    - \"2.\
+    \ guard-specs validates and stores product\"\n    - \"3. guard-specs generates\
+    \ bootstrap artifact and persists metadata\"\n    - \"4. Architect fetches artifact\
+    \ and begins session\"\n    - \"5. Implementor runs tasks and may POST #FEEDBACK_CONTRACT\
+    \ to /webhooks/scan-result\"\n  uploaded_draft_trace: \"/mnt/data/guardsuite-specs.yml\"\
+    \ # preserved for session traceability\n\n# End of guard-specs/spec.yml"
+  pillar: platform
+  product: guardsuite_master_spec
+  provenance:
+  - Derived from the GuardSuite Specs charter dated 2025-11-24.
+  - Aligned with guardsuite-template evaluator and governance invariants.
+  - Backed by the deterministic bootstrap artifact contract.
+  schema_requirements:
+    canonical_schema_required: true
+    metadata_schema_required: true
+    provenance_schema_required: true
+    fragment_schemas_required: true
+    additional_schemas:
+    - schemas/product_schema.yml
+    - schemas/checklist_schema.yml
+    - schemas/gpt_instructions_schema.yml
+    - schemas/bootstrap_schema.yml
+    - schemas/cli_output.json
+    - schemas/cli_error.json
+    - schemas/fixpack_schema.yml
+  spec_source: products/guardsuite_master_spec/spec.yml
+  structure_requirements:
+  - id: STRUCT-GMSTR-001
+    description: Preserve every source section, bullet, and descriptive line from
+      the historical master spec file.
+    required: true
+  - id: STRUCT-GMSTR-002
+    description: 'Apply Strategy-D ordering: metadata ⇒ canonical requirement sections
+      ⇒ phases ⇒ legacy snapshot.'
+    required: true
+  - id: STRUCT-GMSTR-003
+    description: Document governance, schema, and API expectations before enumerating
+      operational phases.
+    required: true
+  testing_requirements:
+    unit_tests_required: true
+    integration_tests_required: true
+    snapshot_tests_required: true
+    parity_tests_required: true
+    wasm_tests_required: false
+    schema_validation_tests_required: true
+    performance_tests_required: true
+    minimum_coverage_percent: 85
+  version: '2026.04'
